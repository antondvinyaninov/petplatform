# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - Admin Panel

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- ‚úÖ Go 1.23+
- ‚úÖ Node.js 18+
- ‚úÖ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
- ‚úÖ Gateway –¥–æ—Å—Ç—É–ø–µ–Ω (https://api.zooplatforma.ru)
- ‚úÖ –£ –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ä–æ–ª—å—é `superadmin`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```
Admin Frontend (4000) ‚Üí Admin Backend (9000) ‚Üí Gateway (api.zooplatforma.ru) ‚Üí Main Backend
                                                                                      ‚Üì
                                                                              PostgreSQL Database
```

## –ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

**–í–∞–∂–Ω–æ:** –ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:

1. ‚úÖ PostgreSQL (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
2. ‚úÖ Main Backend (—á–µ—Ä–µ–∑ Gateway)
3. ‚úÖ Gateway (https://api.zooplatforma.ru) - **—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
4. üîß Admin Backend (–ø–æ—Ä—Ç 9000) - **–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–µ–π—á–∞—Å**
5. üîß Admin Frontend (–ø–æ—Ä—Ç 4000) - **–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–µ–π—á–∞—Å**

## –®–∞–≥ 0: –ü—Ä–æ–≤–µ—Ä–∫–∞ Gateway

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Gateway –¥–æ—Å—Ç—É–ø–µ–Ω:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Gateway
curl https://api.zooplatforma.ru/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"status":"healthy","success":true,...}
```

–ï—Å–ª–∏ Gateway –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã.

## –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É backend
cd backend

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env
# –í–ê–ñ–ù–û: JWT_SECRET –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Gateway!
nano .env

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
go mod download

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend
go run main.go
```

Backend –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:9000`

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Frontend

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É frontend
cd frontend

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ frontend
npm run dev
```

Frontend –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:4000`

## –®–∞–≥ 3: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Gateway (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `http://localhost:80/api/auth/login`
3. –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å —Ä–æ–ª—å—é `superadmin`
4. Gateway —É—Å—Ç–∞–Ω–æ–≤–∏—Ç cookie `auth_token`
5. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:4000`
6. –í—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç–µ—Å—å

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ cookie (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

1. –í–æ–π–¥–∏—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —Å–∞–π—Ç –ø–æ–¥ superadmin
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Application ‚Üí Cookies
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ cookie `auth_token`
5. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:4000`
6. –í DevTools —Å–æ–∑–¥–∞–π—Ç–µ cookie:
   - Name: `auth_token`
   - Value: (–≤—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
   - Domain: `localhost`
   - Path: `/`
7. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### Backend

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health check
curl http://localhost:9000/api/admin/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# {"status": "ok", "service": "admin-api"}
```

### Frontend

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:4000`
2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –¥–∞—à–±–æ—Ä–¥ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª—ã:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - –ü–æ—Å—Ç—ã
   - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –õ–æ–≥–∏
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
   - –ú–æ–¥–µ—Ä–∞—Ü–∏—è

## Troubleshooting

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–û—à–∏–±–∫–∞: "JWT_SECRET must be set"**

–†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `JWT_SECRET` –≤ `.env` —Ñ–∞–π–ª–µ

```bash
cd backend
nano .env
# –î–æ–±–∞–≤—å—Ç–µ: JWT_SECRET=jyjy4VlgOPGIPSG5vJPurXDnd1ZpHj2X2dIBtdWfjJE=
```

**–û—à–∏–±–∫–∞: "Gateway –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"**

–†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Gateway –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 80

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Gateway
curl http://localhost:80/health
```

### Frontend –Ω–µ –º–æ–∂–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è

**–û—à–∏–±–∫–∞: "–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"**

–†–µ—à–µ–Ω–∏–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Gateway –∑–∞–ø—É—â–µ–Ω
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Gateway
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ cookie `auth_token` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–û—à–∏–±–∫–∞: "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω"**

–†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å —Ä–æ–ª—å `superadmin`

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Gateway
curl -X GET http://localhost:80/api/auth/me \
  -H "Cookie: auth_token=YOUR_TOKEN"
```

### CORS –æ—à–∏–±–∫–∏

**–û—à–∏–±–∫–∞: "CORS policy blocked"**

–†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤—å—Ç–µ origin –≤ `CORS_ORIGINS` –≤ backend/.env

```env
CORS_ORIGINS=http://localhost:4000,http://localhost:3000
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Backend

```bash
# –ó–∞–ø—É—Å–∫
go run main.go

# –°–±–æ—Ä–∫–∞
go build -o admin-api

# –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
./admin-api

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
go mod tidy

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
go vet ./...
```

### Frontend

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev

# –°–±–æ—Ä–∫–∞
npm run build

# Production –∑–∞–ø—É—Å–∫
npm start

# –õ–∏–Ω—Ç–∏–Ω–≥
npm run lint
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ò–∑—É—á–∏—Ç–µ [README.md](README.md) –¥–ª—è –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
2. –ò–∑—É—á–∏—Ç–µ [backend/README.md](backend/README.md) –¥–ª—è backend API
3. –ò–∑—É—á–∏—Ç–µ [frontend/README.md](frontend/README.md) –¥–ª—è frontend
4. –ò–∑—É—á–∏—Ç–µ [CHANGELOG.md](CHANGELOG.md) –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –∏ frontend
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Gateway –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub
5. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞ support@zooplatforma.ru

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π.
